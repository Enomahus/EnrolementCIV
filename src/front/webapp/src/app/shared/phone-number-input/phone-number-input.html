<div class="phone-input-wrapper">
  <!-- Sélecteur de pays -->
  <div class="country-selector">
    <button class="selector-btn" (click)="toggleDropdown()">
      <span class="{{ selectedCountry().flagClass }}"></span>
      <span>{{ selectedCountry().dialCode }}</span>
    </button>

    @if (dropdownOpen()) {
      <div class="dropdown">
        <!-- Recherche -->
        <input
          type="text"
          class="search-input"
          (input)="search.set($any($event.target).value)"
          (click)="$event.stopPropagation()"
          [placeholder]="'global.searchCountry' | translate"
        />

        <!-- Liste filtrée -->
        @for (c of filteredCountries(); track c.codeIso) {
          <button class="dropdown-item" type="button" (click)="selectCountry(c)">
            <span class="{{ c.flagClass }}"></span>
            <span class="name">{{ c.name }}</span>
            <span class="dial">{{ c.dialCode }}</span>
          </button>
        } @empty {
          <div class="empty">{{ 'global.notFound' | translate }}</div>
        }
      </div>
    }
  </div>

  <!-- Champ de saisie -->
  <input
    [id]="labelForId"
    type="tel"
    class="input-block phone-input"
    [value]="viewValue()"
    (input)="onInput($any($event.target).value)"
    [required]="required"
    (blur)="touchIfEmpty.emit('phoneNumber')"
    [placeholder]="'phoneNumberInput.placeholder' | translate"
  />
</div>
